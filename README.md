# SmsForwarder - 安卓短信转发器

这是一个专为解决国产安卓定制系统（如 ColorOS, MIUI, HarmonyOS）后台限制问题而开发的短信转发应用。它可以将手机收到的短信实时、稳定地转发到您指定的QQ邮箱。

## 核心功能

- **静默监听**: 采用静态广播接收器技术，收到短信自动唤醒处理（部分国产机型需锁定后台）。
- **邮件转发**: 通过 SMTP 协议，将短信内容和发件人信息作为邮件发送到指定邮箱。
- **按需服务**: 仅在处理短信转发时启动前台服务（显示短暂通知），任务完成后自动停止，符合 Android 最新规范，杜绝后台耗电。
- **动态配置**: 提供简洁的用户界面，方便用户随时修改发件人邮箱、授权码和收件人邮箱。
- **实时日志**: 在 App 界面提供一个实时滚动的日志窗口，方便追踪短信接收、邮件发送的每一个步骤，快速定位问题。

## 使用方法

1.  **编译安装**:
    - 使用 Android Studio 打开本项目。
    - 等待 Gradle 同步完成后，点击 "Run 'app'" 按钮将应用安装到您的安卓手机上。

2.  **配置应用**:
    - 打开手机上安装好的 "SmsForwarder" 应用。
    - **发件人QQ邮箱**: 填入您用来发送邮件的QQ邮箱地址。
    - **邮箱授权码**: **注意！** 这里填写的不是您的QQ邮箱密码，而是专用的SMTP授权码。获取步骤如下：
        1. 使用电脑浏览器登录您的QQ邮箱网页版。
        2. 点击顶部的 **“设置”** -> **“账户”**。
        3. 向下滚动找到 **“POP3/IMAP/SMTP/Exchange/CardDAV/CalDAV服务”** 区域。
        4. 确保 **“IMAP/SMTP服务”** 是开启状态。如果未开启，请先开启。
        5. 点击 **“生成授权码”** 按钮，按照弹出的窗口提示（通常是发送一条指定内容的短信）进行安全验证。
        6. 验证通过后，窗口会显示一串16位的字符串，这就是您需要的 **授权码**。请将其复制并粘贴到App的输入框中。
    - **收件人邮箱**: 填入您希望接收短信的邮箱地址。
    - 点击 **“保存配置”**。

3.  **授权与自动运行**:
    - 应用会自动请求读取短信、发送通知等必要权限，请全部选择 **“允许”**。
    - **配置保存后，应用即进入就绪状态。**

## 常见问题与故障排除 (必读)

**如果您发现清理后台后应用无法转发短信，请按以下步骤排查：**

由于国产系统（ColorOS、MIUI等）对后台“自启动”限制极为严格，可能会拦截短信广播唤醒应用。

1.  **锁定应用 (最有效)**:
    - 打开应用后，进入手机的 **“最近任务”** 界面（多任务切换页）。
    - 找到 "SmsForwarder" 的卡片，点击右上角菜单或长按，选择 **“锁定”**。
    - 锁定后，应用卡片上通常会出现一个小锁图标，即使点击“一键清理”，该应用也会保留在后台，确保其能稳定接收短信。

2.  **电池优化**:
    - 进入手机 **“设置”** -> **“电池”** -> **“应用电池管理”**。
    - 找到 "SmsForwarder"，关闭所有“自动优化”或“智能控制”的选项，并确保 **“允许完全后台行为”** 或 **“允许后台运行”** 是开启状态。

3.  **自启动权限**:
    - 进入手机 **“设置”** -> **“应用管理”** -> **“自启动管理”**。
    - 找到 "SmsForwarder"，**允许**其自启动（允许被系统广播唤醒）。

4.  **通知权限**:
    - 确保应用的 **“通知权限”** 是开启状态。如果通知被屏蔽，系统可能会认为应用行为异常而直接杀死后台服务。

只要按照上述步骤（特别是**锁定应用**）操作，即可确保应用在国产手机上长期稳定运行。
